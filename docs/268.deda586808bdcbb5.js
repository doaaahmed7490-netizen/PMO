"use strict";(self.webpackChunknebular_downgrade_2=self.webpackChunknebular_downgrade_2||[]).push([[268],{8268:($,b,c)=>{c.r(b),c.d(b,{DistrictModule:()=>O});var h=c(177),a=c(9417),f=c(4069),o=c(7037),C=c(3922),d=c(3955),S=c(558),I=c(1626),F=c(9615),v=c(9213),y=c(2042),l=c(5743),t=c(4438),D=c(7948),g=c(2741);let U=(()=>{class s{constructor(e,r,i,n,u,m){this.formBuilder=e,this.districtService=r,this.router=i,this.route=n,this.toastrService=u,this.translate=m,this.districts=[],this.Types=["Event","Knowledge Center"],this.submitted=!1,this.isSubmitted=!1}ngOnInit(){this.initForm()}getDistricts(){this.districtService.searchDistrict({PageNumber:1,PageSize:1e3}).subscribe(e=>{this.districts=e.entity.entities})}initForm(){this.districtForm=this.formBuilder.group({name:["",[a.k0.required,a.k0.minLength(3)]],notes:[""]})}onSubmit(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes")}Close(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes")}get fc(){return this.districtForm.controls}static{this.\u0275fac=function(r){return new(r||s)(t.rXU(a.ok),t.rXU(D.m),t.rXU(l.Ix),t.rXU(l.nX),t.rXU(g.t),t.rXU(d.c$))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-add-district"]],decls:27,vars:10,consts:[[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","DistrictName",1,"label"],["type","text","formControlName","name","nbInput","","shape","round","fullWidth","","id","name",3,"status"],["for","notes",1,"label"],["type","text","formControlName","notes","nbInput","","shape","round","fullWidth","","id","notes"],[1,"row","mt-2"],[1,"col-md-2"],["type","submit",1,"special-button","m-2","mt-4","w-100"],["type","button",1,"special-button","m-2","mt-4","w-100",3,"click"]],template:function(r,i){1&r&&(t.j41(0,"nb-card")(1,"nb-card-header")(2,"h5"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"nb-card-body")(6,"form",0),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(7,"div",1)(8,"div",2)(9,"div",3)(10,"label",4)(11,"h6"),t.EFF(12),t.k0s()(),t.nrm(13,"input",5),t.k0s()(),t.j41(14,"div",2)(15,"div",3)(16,"label",6)(17,"h6"),t.EFF(18),t.k0s()(),t.nrm(19,"textarea",7),t.k0s()()(),t.j41(20,"div",8)(21,"div",9)(22,"button",10),t.EFF(23),t.k0s()(),t.j41(24,"div",9)(25,"button",11),t.bIt("click",function(){return i.Close()}),t.EFF(26),t.k0s()()()()()()),2&r&&(t.R7$(3),t.Lme("",t.bMT(4,8,"Add")," ","\u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a",""),t.R7$(3),t.Y8G("formGroup",i.districtForm),t.R7$(6),t.SpI(" ","\u0646\u0648\u0639 \u0627\u0644\u0645\u0631\u0641\u0642",""),t.R7$(),t.Y8G("status",i.fc.name.touched&&i.fc.name.errors?"danger":"basic"),t.R7$(5),t.SpI(" ","\u0645\u0644\u0627\u062d\u0638\u0627\u062a",""),t.R7$(5),t.SpI(" ","\u062d\u0641\u0638"," "),t.R7$(3),t.SpI(" ","\u0625\u0644\u063a\u0627\u0621"," "))},dependencies:[o.SrT,o.KH5,o.zJv,o.i6h,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,d.D9],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:2px solid #826026;text-align:center}thead[_ngcontent-%COMP%]{background-color:#826026;color:#fff;border:2px solid #826026}.actions[_ngcontent-%COMP%]{text-align:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}"]})}}return s})();var M=c(6962);function E(s,p){1&s&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"District is required")," "))}function G(s,p){if(1&s&&(t.j41(0,"nb-option",15),t.EFF(1),t.k0s()),2&s){const e=p.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name,"")}}let P=(()=>{class s{constructor(e,r,i,n,u,m){this.formBuilder=e,this.districtService=r,this.router=i,this.route=n,this.toastrService=u,this.translate=m,this.districts=[],this.Types=["Event","Knowledge Center"],this.submitted=!1,this.isSubmitted=!1}ngOnInit(){this.initForm(),this.getDistricts(),this.route.params.subscribe(e=>{this.Id=e.id}),this.getDistrictInfoById()}getDistrictInfoById(){this.districtService.getDistrictById(this.Id).subscribe(e=>{this.currentDistrict=e.entity,this.bindForm()})}bindForm(){this.districtForm.controls.Id.setValue(this.currentDistrict.id),this.districtForm.controls.name.setValue(this.currentDistrict.name),this.districtForm.controls.notes.setValue(this.currentDistrict.notes),this.districtForm.controls.parentId.setValue(this.currentDistrict.parentId)}getDistricts(){this.districtService.searchDistrict({PageNumber:1,PageSize:1e3}).subscribe(e=>{this.districts=e.entity.entities})}initForm(){this.districtForm=this.formBuilder.group({Id:[""],name:["",[a.k0.required,a.k0.minLength(3)]],notes:[""],parentId:[""]})}onSubmit(){if(this.submitted=!0,this.isSubmitted=!0,this.districtForm.invalid)return;const e=this.districtForm.value;let r={id:this.Id,name:e.name,notes:e.notes,parentId:e.parentId.length<1?null:e.parentId};r.id=this.Id,this.districtService.updateDistrict(r).subscribe(i=>{200==i.status&&(this.toastrService.Update(M.C.District),this.getDistricts(),this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/District"))})}get fc(){return this.districtForm.controls}static{this.\u0275fac=function(r){return new(r||s)(t.rXU(a.ok),t.rXU(D.m),t.rXU(l.Ix),t.rXU(l.nX),t.rXU(g.t),t.rXU(d.c$))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-edit-district"]],decls:39,vars:27,consts:[[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","DistrictName",1,"label"],["type","text","formControlName","name","nbInput","","shape","round","fullWidth","","id","name",3,"status"],[4,"ngIf"],["for","MainDistrict",1,"label"],["formControlName","parentId","id","parentId","shape","round","fullWidth","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","notes",1,"label"],["type","text","formControlName","notes","nbInput","","shape","round","fullWidth","","id","notes"],[1,"row","mt-2"],["type","submit","status","primary","nbButton","",1,"offset-md-11",3,"disabled"],[3,"value"]],template:function(r,i){1&r&&(t.j41(0,"nb-card")(1,"nb-card-header")(2,"h5"),t.EFF(3),t.nI1(4,"translate"),t.nI1(5,"translate"),t.k0s()(),t.j41(6,"nb-card-body")(7,"form",0),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(8,"div",1)(9,"div",2)(10,"div",3)(11,"label",4)(12,"h6"),t.EFF(13),t.nI1(14,"translate"),t.k0s()(),t.nrm(15,"input",5),t.DNE(16,E,3,3,"mat-error",6),t.k0s()(),t.j41(17,"div",2)(18,"div",3)(19,"label",7)(20,"h6"),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.j41(23,"nb-select",8),t.mxI("ngModelChange",function(u){return t.DH7(i.currentDistrict.parentId,u)||(i.currentDistrict.parentId=u),u}),t.j41(24,"nb-option",9),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.DNE(27,G,2,2,"nb-option",10),t.k0s()()(),t.j41(28,"div",2)(29,"div",3)(30,"label",11)(31,"h6"),t.EFF(32),t.nI1(33,"translate"),t.k0s()(),t.nrm(34,"textarea",12),t.k0s()()(),t.j41(35,"div",13)(36,"button",14),t.EFF(37),t.nI1(38,"translate"),t.k0s()()()()()),2&r&&(t.R7$(3),t.Lme("",t.bMT(4,13,"Edit")," ",t.bMT(5,15,"District"),""),t.R7$(4),t.Y8G("formGroup",i.districtForm),t.R7$(6),t.SpI(" ",t.bMT(14,17,"District Name"),""),t.R7$(2),t.Y8G("status",i.fc.name.touched&&i.fc.name.errors?"danger":"basic"),t.R7$(),t.Y8G("ngIf",i.fc.name.touched&&i.fc.name.hasError("required")),t.R7$(5),t.SpI(" ",t.bMT(22,19,"Main District"),""),t.R7$(2),t.R50("ngModel",i.currentDistrict.parentId),t.R7$(2),t.JRh(t.bMT(26,21,"No data selected")),t.R7$(2),t.Y8G("ngForOf",i.districts),t.R7$(5),t.SpI(" ",t.bMT(33,23,"Notes"),""),t.R7$(4),t.Y8G("disabled",i.districtForm.invalid||i.isSubmitted),t.R7$(),t.JRh(t.bMT(38,25,"Save")))},dependencies:[o.SrT,o.KH5,o.zJv,o.YP2,o.i6h,h.Sq,h.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,o.S81,o.ZJ2,d.D9]})}}return s})();var j=c(5312);const T=["strategicGoalFilter"];function k(s,p){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",4)(6,"button",5),t.bIt("click",function(){const i=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.edit(i))}),t.j41(7,"mat-icon"),t.EFF(8,"edit"),t.k0s()()(),t.j41(9,"td",4)(10,"button",6),t.bIt("click",function(){const i=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.delete1(i))}),t.j41(11,"mat-icon"),t.EFF(12,"delete"),t.k0s()()()()}if(2&s){const e=p.$implicit;t.R7$(2),t.JRh(e.type),t.R7$(2),t.JRh(e.notes)}}const R=[{path:"",component:(()=>{class s{constructor(e,r,i,n,u,m){this.toastrService=e,this.translate=r,this.router=i,this.route=n,this._detector=u,this.dialogService=m,this.tableData=[{type:"\u0639\u0642\u062f \u0627\u0644\u0645\u0634\u0631\u0648\u0639",notes:"\u064a\u0631\u0641\u0642 \u0627\u0644\u0639\u0642\u062f \u0645\u0639 \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"},{type:"\u062c\u062f\u0648\u0644 \u0627\u0644\u0643\u0645\u064a\u0627\u062a",notes:""},{type:"\u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0627\u0646\u062c\u0627\u0632",notes:"\u064a\u0631\u0641\u0642 \u0628\u0639\u062f \u0627\u0646\u062a\u0647\u0627\u0621 \u0643\u0644 \u0645\u0631\u062d\u0644\u0629"},{type:"\u062e\u0637\u0627\u0628 \u0627\u0644\u062a\u0631\u0633\u064a\u0629 ",notes:"\u064a\u0631\u0641\u0642 \u062e\u0637\u0627\u0628 \u0627\u0644\u062a\u0631\u0633\u064a\u0629 \u0639\u0646\u062f \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0639\u0631\u0636 \u0627\u0644\u0641\u0646\u0649 \u0644\u0644\u0645\u0634\u0631\u0648\u0639"},{type:"\u0645\u0631\u0641\u0642\u0627\u062a \u0627\u062e\u0631\u0649",notes:""}],this.dir="rtl",this.totalRecords=0,this.pageSizeOptions=j.c.DEFAULT_PAGE_SIZE_OPTIONS,this.displayedColumns=["strategicGoalName","GoalCode","GoalDesc","actions1","actions2"],this.tableData1=[],"ar"==r.currentLang&&(this.dir="rtl")}ngOnInit(){this.tableData1=[{type:"\u0639\u0642\u062f \u0627\u0644\u0645\u0634\u0631\u0648\u0639",notes:"\u064a\u0631\u0641\u0642 \u0627\u0644\u0639\u0642\u062f \u0645\u0639 \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"},{type:"\u062c\u062f\u0648\u0644 \u0627\u0644\u0643\u0645\u064a\u0627\u062a",notes:""},{type:"\u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0627\u0646\u062c\u0627\u0632",notes:"\u064a\u0631\u0641\u0642 \u0628\u0639\u062f \u0627\u0646\u062a\u0647\u0627\u0621 \u0643\u0644 \u0645\u0631\u062d\u0644\u0629"},{type:"\u062e\u0637\u0627\u0628 \u0627\u0644\u062a\u0631\u0633\u064a\u0629 ",notes:"\u064a\u0631\u0641\u0642 \u062e\u0637\u0627\u0628 \u0627\u0644\u062a\u0631\u0633\u064a\u0629 \u0639\u0646\u062f \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0639\u0631\u0636 \u0627\u0644\u0641\u0646\u0649 \u0644\u0644\u0645\u0634\u0631\u0648\u0639"},{type:"\u0645\u0631\u0641\u0642\u0627\u062a \u0627\u062e\u0631\u0649",notes:""}]}ngAfterViewInit(){}sortData(e){const r=this.dataSource.data.slice();e.active&&""!==e.direction?(this.dataSource.data=r.sort((i,n)=>{if(!i.sortable||!n.sortable)return 1;{let u="asc"===e.direction;switch(e.active){case"strategicGoalName":return this.compare(i.strategicGoalName.toLowerCase(),n.strategicGoalName.toLowerCase(),u);case"GoalCode":return this.compare(i.goalCode.toString(),n.goalCode.toString(),u);default:return 0}}}),this.dataSource=new f.I6(this.dataSource.data)):this.dataSource.data=r}compare(e,r,i){return e<r?-1*(i?1:-1):e>r?1*(i?1:-1):0*(i?1:-1)}applyFilter(e){const r={strategicGoal:this.strategicGoalFilter.nativeElement.value.trim(),sortable:!0};this.dataSource.filterPredicate=(i,n)=>{const u=JSON.parse(n);return""==i.strategicGoalName||i.strategicGoalName.toLowerCase().includes(u.strategicGoalName.toLowerCase())},this.dataSource.filter=JSON.stringify(r),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ShowGrants(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/StrategicGoals/list/")}ShowAddGrant(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes/add")}ShowAdd(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes/add")}edit(e){console.log("Edit:",e)}delete1(e){console.log("Delete:",e)}ShowEdit(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes/edit/"+e)}static{this.\u0275fac=function(r){return new(r||s)(t.rXU(g.t),t.rXU(d.c$),t.rXU(l.Ix),t.rXU(l.nX),t.rXU(t.gRc),t.rXU(o.S0W))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-list-district"]],viewQuery:function(r,i){if(1&r&&(t.GBs(y.B4,5),t.GBs(F.iy,5),t.GBs(T,5)),2&r){let n;t.mGM(n=t.lsd())&&(i.sort=n.first),t.mGM(n=t.lsd())&&(i.paginator=n.first),t.mGM(n=t.lsd())&&(i.strategicGoalFilter=n.first)}},decls:20,vars:3,consts:[[1,"content-container"],["type","button",1,"special-button","mb-3",3,"click"],[1,"responsive-table"],[4,"ngFor","ngForOf"],[1,"actions"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"]],template:function(r,i){1&r&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2),t.k0s(),t.nrm(3,"hr"),t.j41(4,"button",1),t.bIt("click",function(){return i.ShowAdd()}),t.EFF(5),t.k0s(),t.j41(6,"nb-card")(7,"table",2)(8,"thead")(9,"tr")(10,"th"),t.EFF(11,"\u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a"),t.k0s(),t.j41(12,"th"),t.EFF(13,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"),t.k0s(),t.j41(14,"th"),t.EFF(15,"\u0627\u0644\u062a\u0639\u062f\u064a\u0644"),t.k0s(),t.j41(16,"th"),t.EFF(17,"\u0627\u0644\u062d\u0630\u0641"),t.k0s()()(),t.j41(18,"tbody"),t.DNE(19,k,13,2,"tr",3),t.k0s()()()()),2&r&&(t.R7$(2),t.SpI(" ","\u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a"," "),t.R7$(3),t.SpI(" ","\u0625\u0636\u0627\u0641\u0629 \u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a"," "),t.R7$(14),t.Y8G("ngForOf",i.tableData1))},dependencies:[o.SrT,h.Sq,v.An],styles:[".responsive-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.responsive-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#826026;color:#fff;border:2px solid #826026;padding:10px;text-align:center}.responsive-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:2px solid #826026;text-align:center}@media (max-width: 768px){.responsive-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#826026;color:#fff;border:2px solid #826026}.responsive-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:15px;border:1px solid #ccc}.responsive-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px}.responsive-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:700}}"]})}}return s})()},{path:"add",component:U},{path:"edit/:id",component:P}];let N=(()=>{class s{static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[l.iI.forChild(R),l.iI]})}}return s})(),O=(()=>{class s{static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[N,o.lVF,o.P5N,o.pty,h.MD,a.YN,a.X1,o.dQU,o.lVF,o.P5N,o._A2,o.NeG,o.clu,o.VcP,v.m_,f.tP,y.NQ,F.Ou,C.G,d.h.forChild({loader:{provide:d.Wr,useFactory:S._,deps:[I.Qq]}})]})}}return s})()}}]);