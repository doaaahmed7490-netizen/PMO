"use strict";(self.webpackChunknebular_downgrade_2=self.webpackChunknebular_downgrade_2||[]).push([[414],{4414:(B,b,s)=>{s.r(b),s.d(b,{DepartmentModule:()=>T});var c=s(177),a=s(9417),g=s(4069),u=s(7037),m=s(3955),S=s(558),D=s(1626),f=s(9615),v=s(9213),F=s(2042),C=s(3922),d=s(5743),t=s(4438),I=s(7948),h=s(2741);let y=(()=>{class o{constructor(e,r,n,i,l){this.formBuilder=e,this.districtService=r,this.router=n,this.route=i,this.toastrService=l,this.districts=[],this.Types=["Event","Knowledge Center"],this.submitted=!1,this.isSubmitted=!1}ngOnInit(){this.initForm()}getDistricts(){this.districtService.searchDistrict({PageNumber:1,PageSize:1e3}).subscribe(e=>{this.districts=e.entity.entities})}initForm(){this.districtForm=this.formBuilder.group({name:["",[a.k0.required,a.k0.minLength(3)]],notes:[""]})}onSubmit(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/Jobs")}Close(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/Jobs")}get fc(){return this.districtForm.controls}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(a.ok),t.rXU(I.m),t.rXU(d.Ix),t.rXU(d.nX),t.rXU(h.t))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-add-department"]],decls:26,vars:7,consts:[[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","DistrictName",1,"label"],["type","text","formControlName","name","nbInput","","shape","round","fullWidth","","id","name",3,"status"],["for","notes",1,"label"],["type","text","formControlName","notes","nbInput","","shape","round","fullWidth","","id","notes"],[1,"row","mt-2"],[1,"col-md-2"],["type","submit",1,"special-button","m-2","mt-4","w-100"],["type","button",1,"special-button","m-2","mt-4","w-100",3,"click"]],template:function(r,n){1&r&&(t.j41(0,"nb-card")(1,"nb-card-header")(2,"h5"),t.EFF(3),t.k0s()(),t.j41(4,"nb-card-body")(5,"form",0),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(6,"div",1)(7,"div",2)(8,"div",3)(9,"label",4)(10,"h6"),t.EFF(11),t.k0s()(),t.nrm(12,"input",5),t.k0s()(),t.j41(13,"div",2)(14,"div",3)(15,"label",6)(16,"h6"),t.EFF(17),t.k0s()(),t.nrm(18,"textarea",7),t.k0s()()(),t.j41(19,"div",8)(20,"div",9)(21,"button",10),t.EFF(22),t.k0s()(),t.j41(23,"div",9)(24,"button",11),t.bIt("click",function(){return n.Close()}),t.EFF(25),t.k0s()()()()()()),2&r&&(t.R7$(3),t.SpI(" ","\u0625\u0636\u0627\u0641\u0629 \u0648\u0638\u064a\u0641\u0629",""),t.R7$(2),t.Y8G("formGroup",n.districtForm),t.R7$(6),t.SpI(" ","\u0627\u0644\u0648\u0638\u064a\u0641\u0629",""),t.R7$(),t.Y8G("status",n.fc.name.touched&&n.fc.name.errors?"danger":"basic"),t.R7$(5),t.SpI(" ","\u0645\u0644\u0627\u062d\u0638\u0627\u062a",""),t.R7$(5),t.SpI(" ","\u062d\u0641\u0638"," "),t.R7$(3),t.SpI(" ","\u0625\u0644\u063a\u0627\u0621"," "))},dependencies:[u.SrT,u.KH5,u.zJv,u.i6h,a.qT,a.me,a.BC,a.cb,a.j4,a.JD],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:2px solid #826026;text-align:center}thead[_ngcontent-%COMP%]{background-color:#826026;color:#fff;border:2px solid #826026}.actions[_ngcontent-%COMP%]{text-align:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}"]})}}return o})();var j=s(6962),U=s(8932);function G(o,p){1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Department is Required")," "))}function E(o,p){if(1&o&&(t.j41(0,"nb-option",16),t.EFF(1),t.k0s()),2&o){const e=p.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.departmentName,"")}}let P=(()=>{class o{constructor(e,r,n,i,l){this.formBuilder=e,this.departmentService=r,this.router=n,this.route=i,this.toastrService=l,this.departmet=[],this.Types=["Event","Knowledge Center"],this.submitted=!1,this.isSubmitted=!1,(null==localStorage.getItem("token")||""==localStorage.getItem("token"))&&this.router.navigateByUrl("/auth")}ngOnInit(){this.initForm(),this.getDepartmenst(),this.route.params.subscribe(e=>{this.Id=e.id}),this.getDepartmentInfoById()}getDepartmentInfoById(){this.departmentService.getById(this.Id).subscribe(e=>{this.currentDepartment=e.entity,this.bindForm()})}bindForm(){this.DepartmentForm.controls.id.setValue(this.currentDepartment.id),this.DepartmentForm.controls.deparment.setValue(this.currentDepartment.departmentName),this.DepartmentForm.controls.notes.setValue(this.currentDepartment.desc),this.DepartmentForm.controls.parentId.setValue(this.currentDepartment.mainDeptId)}getDepartmenst(){this.departmentService.searchDepartments({PageNumber:1,PageSize:1e3}).subscribe(e=>{this.departmet=e.entity.entities.filter(r=>""!=r.departmentName)})}initForm(){this.DepartmentForm=this.formBuilder.group({id:[null],deparment:["",[a.k0.required,a.k0.minLength(3)]],notes:[""],parentId:[""]})}onSubmit(){if(this.submitted=!0,this.isSubmitted=!0,this.DepartmentForm.invalid)return;const e=this.DepartmentForm.value;let r={id:this.Id,departmentName:e.deparment,desc:e.notes,mainDeptId:e.parentId.length<1?null:e.parentId};r.id=this.Id,1==!/\S/.test(r.departmentName)?this.toastrService.danger("\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0625\u062f\u0627\u0631\u0629 \u0644\u0625\u062a\u0645\u0627\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0641\u0638","\u062e\u0637\u0623"):this.departmentService.updateDepartment(r).subscribe({next:i=>{this.toastrService.Update(j.C.Department),this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/Departments")},error:i=>{this.toastrService.danger(i.error.error,"\u062e\u0637\u0623"),this.submitted=!1,this.isSubmitted=!1}})}get fc(){return this.DepartmentForm.controls}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(a.ok),t.rXU(U.a),t.rXU(d.Ix),t.rXU(d.nX),t.rXU(h.t))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-edit-department"]],decls:37,vars:23,consts:[[1,"content-container","mt-5"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","Department",1,"label"],["type","text","formControlName","deparment","nbInput","","shape","round","fullWidth","","id","deparment",3,"status"],[4,"ngIf"],["for","MainDepartment",1,"label"],["formControlName","parentId","id","parentId","shape","round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],["for","Notes",1,"label"],["type","text","formControlName","notes","nbInput","","shape","round","fullWidth","","id","notes"],[1,"row","mt-2"],[1,"col-md-2"],["type","submit",1,"special-button","m-2","mt-4","w-100",3,"disabled"],[3,"value"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"h5"),t.EFF(2),t.nI1(3,"translate"),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"hr"),t.j41(6,"form",1),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(7,"div",2)(8,"div",3)(9,"div",4)(10,"label",5)(11,"h6"),t.EFF(12),t.nI1(13,"translate"),t.k0s()(),t.nrm(14,"input",6),t.DNE(15,G,3,3,"mat-error",7),t.k0s()(),t.j41(16,"div",3)(17,"div",4)(18,"label",8)(19,"h6"),t.EFF(20),t.nI1(21,"translate"),t.k0s()(),t.j41(22,"nb-select",9),t.DNE(23,E,2,2,"nb-option",10),t.k0s()()(),t.j41(24,"div",3)(25,"div",4)(26,"label",11)(27,"h6"),t.EFF(28),t.nI1(29,"translate"),t.k0s()(),t.j41(30,"textarea",12),t.EFF(31,"          "),t.k0s()()()(),t.j41(32,"div",13)(33,"div",14)(34,"button",15),t.EFF(35),t.nI1(36,"translate"),t.k0s()()()()()),2&r&&(t.R7$(2),t.Lme("",t.bMT(3,11,"Edit")," ",t.bMT(4,13,"Department"),""),t.R7$(4),t.Y8G("formGroup",n.DepartmentForm),t.R7$(6),t.SpI(" ",t.bMT(13,15,"Department")," "),t.R7$(2),t.Y8G("status",n.fc.deparment.touched&&n.fc.deparment.errors?"danger":"basic"),t.R7$(),t.Y8G("ngIf",n.fc.deparment.touched&&n.fc.deparment.hasError("required")),t.R7$(5),t.SpI(" ",t.bMT(21,17,"MainDepartment")," "),t.R7$(3),t.Y8G("ngForOf",n.departmet),t.R7$(5),t.SpI(" ",t.bMT(29,19,"Notes")," "),t.R7$(6),t.Y8G("disabled",n.DepartmentForm.invalid||n.isSubmitted),t.R7$(),t.SpI(" ",t.bMT(36,21,"Save")," "))},dependencies:[u.i6h,c.Sq,c.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,u.S81,u.ZJ2,m.D9]})}}return o})();var k=s(5312);const M=["strategicGoalFilter"];function N(o,p){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",4)(6,"button",5),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.edit(n))}),t.j41(7,"mat-icon"),t.EFF(8,"edit"),t.k0s()()(),t.j41(9,"td",4)(10,"button",6),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.delete1(n))}),t.j41(11,"mat-icon"),t.EFF(12,"delete"),t.k0s()()()()}if(2&o){const e=p.$implicit;t.R7$(2),t.JRh(e.job),t.R7$(2),t.JRh(e.notes)}}const O=[{path:"",component:(()=>{class o{constructor(e,r,n,i,l,$){this.toastrService=e,this.translate=r,this.router=n,this.route=i,this._detector=l,this.dialogService=$,this.tableData=[{job:"\u0645\u0628\u0631\u0645\u062c",notes:"  \u062a\u0637\u0648\u064a\u0631 \u0648\u0627\u0646\u0634\u0627\u0621 \u062a\u0637\u0628\u064a\u0642\u0627\u062a \u0648\u0627\u0646\u0638\u0645\u0629 \u0627\u0644\u0634\u0631\u0643\u0629"},{job:"\u0645\u062f\u064a\u0631 \u0642\u0648\u0627\u0639\u062f \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a",notes:"\u0627\u0646\u0634\u0627\u0621 \u0648\u0627\u062f\u0627\u0631\u0629 \u0642\u0648\u0627\u0639\u062f \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0627\u0646\u0638\u0645\u0629 \u0648\u062a\u0637\u0628\u064a\u0642\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629"},{job:"\u0645\u0647\u0646\u062f\u0633 \u0645\u062f\u0646\u0649",notes:"\u062a\u0635\u0645\u064a\u0645 \u0648\u062a\u0646\u0641\u064a\u0630 \u0648\u0627\u0644\u0625\u0634\u0631\u0627\u0641 \u0639\u0644\u0649 \u0627\u0644\u0645\u0634\u0627\u0631\u064a\u0639 \u0627\u0644\u0625\u0646\u0634\u0627\u0626\u064a\u0629 \u0648\u0627\u0644\u0628\u0646\u064a\u0629 \u0627\u0644\u062a\u062d\u062a\u064a\u0629"},{job:"\u0645\u0647\u0646\u062f\u0633 \u0627\u0644\u0645\u064a\u0643\u0627\u0646\u064a\u0643\u064a",notes:"\u062a\u0635\u0645\u064a\u0645 \u0648\u062a\u0646\u0641\u064a\u0630 \u0648\u0627\u0644\u0625\u0634\u0631\u0627\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0646\u0638\u0645\u0629 \u0627\u0644\u0645\u064a\u0643\u0627\u0646\u064a\u0643\u064a\u0629  \u062f\u0627\u062e\u0644 \u0627\u0644\u0645\u0628\u0627\u0646\u064a \u0648\u0627\u0644\u0645\u0634\u0631\u0648\u0639\u0627\u062a"}],this.dir="rtl",this.totalRecords=0,this.pageSizeOptions=k.c.DEFAULT_PAGE_SIZE_OPTIONS,this.displayedColumns=["strategicGoalName","GoalCode","GoalDesc","actions1","actions2"],this.tableData1=[],"ar"==r.currentLang&&(this.dir="rtl")}ngOnInit(){this.tableData1=[{job:"\u0645\u0628\u0631\u0645\u062c",notes:"  \u062a\u0637\u0648\u064a\u0631 \u0648\u0627\u0646\u0634\u0627\u0621 \u062a\u0637\u0628\u064a\u0642\u0627\u062a \u0648\u0627\u0646\u0638\u0645\u0629 \u0627\u0644\u0634\u0631\u0643\u0629"},{job:"\u0645\u062f\u064a\u0631 \u0642\u0648\u0627\u0639\u062f \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a",notes:"\u0627\u0646\u0634\u0627\u0621 \u0648\u0627\u062f\u0627\u0631\u0629 \u0642\u0648\u0627\u0639\u062f \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0627\u0646\u0638\u0645\u0629 \u0648\u062a\u0637\u0628\u064a\u0642\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629"},{job:"\u0645\u0647\u0646\u062f\u0633 \u0645\u062f\u0646\u0649",notes:"\u062a\u0635\u0645\u064a\u0645 \u0648\u062a\u0646\u0641\u064a\u0630 \u0648\u0627\u0644\u0625\u0634\u0631\u0627\u0641 \u0639\u0644\u0649 \u0627\u0644\u0645\u0634\u0627\u0631\u064a\u0639 \u0627\u0644\u0625\u0646\u0634\u0627\u0626\u064a\u0629 \u0648\u0627\u0644\u0628\u0646\u064a\u0629 \u0627\u0644\u062a\u062d\u062a\u064a\u0629"},{job:"\u0645\u0647\u0646\u062f\u0633 \u0627\u0644\u0645\u064a\u0643\u0627\u0646\u064a\u0643\u064a",notes:"\u062a\u0635\u0645\u064a\u0645 \u0648\u062a\u0646\u0641\u064a\u0630 \u0648\u0627\u0644\u0625\u0634\u0631\u0627\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0646\u0638\u0645\u0629 \u0627\u0644\u0645\u064a\u0643\u0627\u0646\u064a\u0643\u064a\u0629  \u062f\u0627\u062e\u0644 \u0627\u0644\u0645\u0628\u0627\u0646\u064a \u0648\u0627\u0644\u0645\u0634\u0631\u0648\u0639\u0627\u062a"}]}ngAfterViewInit(){}sortData(e){const r=this.dataSource.data.slice();e.active&&""!==e.direction?(this.dataSource.data=r.sort((n,i)=>{if(!n.sortable||!i.sortable)return 1;{let l="asc"===e.direction;switch(e.active){case"strategicGoalName":return this.compare(n.strategicGoalName.toLowerCase(),i.strategicGoalName.toLowerCase(),l);case"GoalCode":return this.compare(n.goalCode.toString(),i.goalCode.toString(),l);default:return 0}}}),this.dataSource=new g.I6(this.dataSource.data)):this.dataSource.data=r}compare(e,r,n){return e<r?-1*(n?1:-1):e>r?1*(n?1:-1):0*(n?1:-1)}applyFilter(e){const r={strategicGoal:this.strategicGoalFilter.nativeElement.value.trim(),sortable:!0};this.dataSource.filterPredicate=(n,i)=>{const l=JSON.parse(i);return""==n.strategicGoalName||n.strategicGoalName.toLowerCase().includes(l.strategicGoalName.toLowerCase())},this.dataSource.filter=JSON.stringify(r),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ShowGrants(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/StrategicGoals/list/")}ShowAddGrant(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes/add")}ShowAdd(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/Jobs/add")}edit(e){console.log("Edit:",e)}delete1(e){console.log("Delete:",e)}ShowEdit(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes/edit/"+e)}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(h.t),t.rXU(m.c$),t.rXU(d.Ix),t.rXU(d.nX),t.rXU(t.gRc),t.rXU(u.S0W))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-department"]],viewQuery:function(r,n){if(1&r&&(t.GBs(F.B4,5),t.GBs(f.iy,5),t.GBs(M,5)),2&r){let i;t.mGM(i=t.lsd())&&(n.sort=i.first),t.mGM(i=t.lsd())&&(n.paginator=i.first),t.mGM(i=t.lsd())&&(n.strategicGoalFilter=i.first)}},decls:20,vars:3,consts:[[1,"content-container"],["type","button",1,"special-button","mb-3",3,"click"],[1,"responsive-table"],[4,"ngFor","ngForOf"],[1,"actions"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2),t.k0s(),t.nrm(3,"hr"),t.j41(4,"button",1),t.bIt("click",function(){return n.ShowAdd()}),t.EFF(5),t.k0s(),t.j41(6,"nb-card")(7,"table",2)(8,"thead")(9,"tr")(10,"th"),t.EFF(11,"\u0627\u0644\u0648\u0638\u0627\u0626\u0641"),t.k0s(),t.j41(12,"th"),t.EFF(13,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"),t.k0s(),t.j41(14,"th"),t.EFF(15,"\u0627\u0644\u062a\u0639\u062f\u064a\u0644"),t.k0s(),t.j41(16,"th"),t.EFF(17,"\u0627\u0644\u062d\u0630\u0641"),t.k0s()()(),t.j41(18,"tbody"),t.DNE(19,N,13,2,"tr",3),t.k0s()()()()),2&r&&(t.R7$(2),t.SpI(" ","\u0627\u0644\u0648\u0638\u0627\u0626\u0641"," "),t.R7$(3),t.SpI(" ","\u0625\u0636\u0627\u0641\u0629 \u0648\u0638\u064a\u0641\u0629"," "),t.R7$(14),t.Y8G("ngForOf",n.tableData1))},dependencies:[u.SrT,c.Sq,v.An],styles:[".responsive-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.responsive-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#826026;color:#fff;border:2px solid #826026;padding:10px;text-align:center}.responsive-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:2px solid #826026;text-align:center}@media (max-width: 768px){.responsive-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#826026;color:#fff;border:2px solid #826026}.responsive-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:15px;border:1px solid #ccc}.responsive-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px}.responsive-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:700}}"]})}}return o})()},{path:"add",component:y},{path:"edit/:id",component:P}];let R=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(O),d.iI]})}}return o})(),T=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[R,u.lVF,u.P5N,u.pty,c.MD,a.YN,a.X1,u.dQU,u.lVF,u.P5N,u._A2,u.NeG,u.clu,u.VcP,v.m_,g.tP,F.NQ,f.Ou,C.G,m.h.forChild({loader:{provide:m.Wr,useFactory:S._,deps:[D.Qq]}})]})}}return o})()}}]);