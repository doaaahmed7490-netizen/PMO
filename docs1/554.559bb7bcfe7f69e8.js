"use strict";(self.webpackChunknebular_downgrade_2=self.webpackChunknebular_downgrade_2||[]).push([[554],{7554:(B,F,c)=>{c.r(F),c.d(F,{DistrictModule:()=>w});var p=c(177),a=c(9417),I=c(4069),o=c(7037),U=c(3922),d=c(3955),M=c(9712),f=c(1626),D=c(9615),v=c(9213),C=c(2042),m=c(5743),t=c(7705),u=c(2113);let b=(new f.Lr).set("Authorization","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiI0MmZiZTI5Zi04NzFkLWUxNGUtODdlMS0xNTMyMmNiNjkwMGMiLCJnaXZlbl9uYW1lIjoiRG9hYSBhaG1lZCAiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9tb2JpbGVwaG9uZSI6IjAxMTQ1MjM2NTQyIiwidW5pcXVlX25hbWUiOiJEb2FhQDIwMjUiLCJuYmYiOjE3MTU1NDUwMTEsImV4cCI6MTcxNTYzMTQxMSwiaWF0IjoxNzE1NTQ1MDExfQ.mFk_0FLKQWLyC7JUe_0agKscveW9U6jWKwR7j7rTU8o"),S=(()=>{class s{constructor(e){this.http=e}addDistrict(e){return this.http.post(u.K.baseUrl+u.K.District.add,e,{headers:b})}searchDistrict(e){return this.http.post(u.K.baseUrl+u.K.District.list,e)}deleteDistrict(e){return this.http.post(u.K.baseUrl+u.K.District.delete,{Id:e},{headers:b})}updateDistrict(e){return this.http.post(u.K.baseUrl+u.K.District.edit,e,{headers:b})}getDistrictById(e){return this.http.post(u.K.baseUrl+u.K.District.getById,{Id:e},{headers:b})}static{this.\u0275fac=function(i){return new(i||s)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var y=c(2741);let G=(()=>{class s{constructor(e,i,r,n,l,h){this.formBuilder=e,this.districtService=i,this.router=r,this.route=n,this.toastrService=l,this.translate=h,this.districts=[],this.Types=["Event","Knowledge Center"],this.submitted=!1,this.isSubmitted=!1}ngOnInit(){this.initForm(),this.getDistricts()}getDistricts(){this.districtService.searchDistrict({PageNumber:1,PageSize:1e3}).subscribe(e=>{this.districts=e.entity.entities})}initForm(){this.districtForm=this.formBuilder.group({name:["",[a.k0.required,a.k0.minLength(3)]],notes:[""]})}onSubmit(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes")}Close(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes")}get fc(){return this.districtForm.controls}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(a.ok),t.rXU(S),t.rXU(m.Ix),t.rXU(m.nX),t.rXU(y.t),t.rXU(d.c$))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-add-district"]],decls:29,vars:14,consts:[[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","DistrictName",1,"label"],["type","text","formControlName","name","nbInput","","shape","round","fullWidth","","id","name",3,"status"],["for","notes",1,"label"],["type","text","formControlName","notes","nbInput","","shape","round","fullWidth","","id","notes"],[1,"row","mt-2"],[1,"col-md-2"],["type","submit",1,"special-button","m-2","mt-4","w-100"],["type","button",1,"special-button","m-2","mt-4","w-100",3,"click"]],template:function(i,r){1&i&&(t.j41(0,"nb-card")(1,"nb-card-header")(2,"h5"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"nb-card-body")(6,"form",0),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(7,"div",1)(8,"div",2)(9,"div",3)(10,"label",4)(11,"h6"),t.EFF(12),t.k0s()(),t.nrm(13,"input",5),t.k0s()(),t.j41(14,"div",2)(15,"div",3)(16,"label",6)(17,"h6"),t.EFF(18),t.nI1(19,"translate"),t.k0s()(),t.nrm(20,"textarea",7),t.k0s()()(),t.j41(21,"div",8)(22,"div",9)(23,"button",10),t.EFF(24),t.nI1(25,"translate"),t.k0s()(),t.j41(26,"div",9)(27,"button",11),t.bIt("click",function(){return r.Close()}),t.EFF(28),t.k0s()()()()()()),2&i&&(t.R7$(3),t.Lme("",t.bMT(4,8,"Add")," ","\u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a",""),t.R7$(3),t.Y8G("formGroup",r.districtForm),t.R7$(6),t.SpI(" ","\u0646\u0648\u0639 \u0627\u0644\u0645\u0631\u0641\u0642",""),t.R7$(1),t.Y8G("status",r.fc.name.touched&&r.fc.name.errors?"danger":"basic"),t.R7$(5),t.SpI(" ",t.bMT(19,10,"Notes"),""),t.R7$(6),t.SpI(" ",t.bMT(25,12,"Save")," "),t.R7$(4),t.SpI(" ","\u0625\u0644\u063a\u0627\u0621"," "))},dependencies:[o.SrT,o.KH5,o.zJv,o.i6h,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,d.D9],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:2px solid #826026;text-align:center}thead[_ngcontent-%COMP%]{background-color:#826026;color:#fff;border:2px solid #826026}.actions[_ngcontent-%COMP%]{text-align:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}"]})}}return s})();var N=c(6962);function E(s,g){1&s&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"District is required")," "))}function j(s,g){if(1&s&&(t.j41(0,"nb-option",15),t.EFF(1),t.k0s()),2&s){const e=g.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.name,"")}}let k=(()=>{class s{constructor(e,i,r,n,l,h){this.formBuilder=e,this.districtService=i,this.router=r,this.route=n,this.toastrService=l,this.translate=h,this.districts=[],this.Types=["Event","Knowledge Center"],this.submitted=!1,this.isSubmitted=!1}ngOnInit(){this.initForm(),this.getDistricts(),this.route.params.subscribe(e=>{this.Id=e.id}),this.getDistrictInfoById()}getDistrictInfoById(){this.districtService.getDistrictById(this.Id).subscribe(e=>{this.currentDistrict=e.entity,this.bindForm()})}bindForm(){this.districtForm.controls.Id.setValue(this.currentDistrict.id),this.districtForm.controls.name.setValue(this.currentDistrict.name),this.districtForm.controls.notes.setValue(this.currentDistrict.notes),this.districtForm.controls.parentId.setValue(this.currentDistrict.parentId)}getDistricts(){this.districtService.searchDistrict({PageNumber:1,PageSize:1e3}).subscribe(e=>{this.districts=e.entity.entities})}initForm(){this.districtForm=this.formBuilder.group({Id:[""],name:["",[a.k0.required,a.k0.minLength(3)]],notes:[""],parentId:[""]})}onSubmit(){if(this.submitted=!0,this.isSubmitted=!0,this.districtForm.invalid)return;const e=this.districtForm.value;let i={id:this.Id,name:e.name,notes:e.notes,parentId:e.parentId.length<1?null:e.parentId};i.id=this.Id,this.districtService.updateDistrict(i).subscribe(r=>{200==r.status&&(this.toastrService.Update(N.C.District),this.getDistricts(),this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/District"))})}get fc(){return this.districtForm.controls}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(a.ok),t.rXU(S),t.rXU(m.Ix),t.rXU(m.nX),t.rXU(y.t),t.rXU(d.c$))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-edit-district"]],decls:39,vars:27,consts:[[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","DistrictName",1,"label"],["type","text","formControlName","name","nbInput","","shape","round","fullWidth","","id","name",3,"status"],[4,"ngIf"],["for","MainDistrict",1,"label"],["formControlName","parentId","id","parentId","shape","round","fullWidth","",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","notes",1,"label"],["type","text","formControlName","notes","nbInput","","shape","round","fullWidth","","id","notes"],[1,"row","mt-2"],["type","submit","status","primary","nbButton","",1,"offset-md-11",3,"disabled"],[3,"value"]],template:function(i,r){1&i&&(t.j41(0,"nb-card")(1,"nb-card-header")(2,"h5"),t.EFF(3),t.nI1(4,"translate"),t.nI1(5,"translate"),t.k0s()(),t.j41(6,"nb-card-body")(7,"form",0),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(8,"div",1)(9,"div",2)(10,"div",3)(11,"label",4)(12,"h6"),t.EFF(13),t.nI1(14,"translate"),t.k0s()(),t.nrm(15,"input",5),t.DNE(16,E,3,3,"mat-error",6),t.k0s()(),t.j41(17,"div",2)(18,"div",3)(19,"label",7)(20,"h6"),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.j41(23,"nb-select",8),t.bIt("ngModelChange",function(l){return r.currentDistrict.parentId=l}),t.j41(24,"nb-option",9),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.DNE(27,j,2,2,"nb-option",10),t.k0s()()(),t.j41(28,"div",2)(29,"div",3)(30,"label",11)(31,"h6"),t.EFF(32),t.nI1(33,"translate"),t.k0s()(),t.nrm(34,"textarea",12),t.k0s()()(),t.j41(35,"div",13)(36,"button",14),t.EFF(37),t.nI1(38,"translate"),t.k0s()()()()()),2&i&&(t.R7$(3),t.Lme("",t.bMT(4,13,"Edit")," ",t.bMT(5,15,"District"),""),t.R7$(4),t.Y8G("formGroup",r.districtForm),t.R7$(6),t.SpI(" ",t.bMT(14,17,"District Name"),""),t.R7$(2),t.Y8G("status",r.fc.name.touched&&r.fc.name.errors?"danger":"basic"),t.R7$(1),t.Y8G("ngIf",r.fc.name.touched&&r.fc.name.hasError("required")),t.R7$(5),t.SpI(" ",t.bMT(22,19,"Main District"),""),t.R7$(2),t.Y8G("ngModel",r.currentDistrict.parentId),t.R7$(2),t.JRh(t.bMT(26,21,"No data selected")),t.R7$(2),t.Y8G("ngForOf",r.districts),t.R7$(5),t.SpI(" ",t.bMT(33,23,"Notes"),""),t.R7$(4),t.Y8G("disabled",r.districtForm.invalid||r.isSubmitted),t.R7$(1),t.JRh(t.bMT(38,25,"Save")))},dependencies:[o.SrT,o.KH5,o.zJv,o.YP2,o.i6h,p.Sq,p.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,o.S81,o.ZJ2,d.D9]})}}return s})();var R=c(5312);const O=["strategicGoalFilter"];function $(s,g){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",5)(6,"button",6),t.bIt("click",function(){const n=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.edit(n))}),t.j41(7,"mat-icon"),t.EFF(8,"edit"),t.k0s()()(),t.j41(9,"td",5)(10,"button",7),t.bIt("click",function(){const n=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.delete1(n))}),t.j41(11,"mat-icon"),t.EFF(12,"delete"),t.k0s()()()()}if(2&s){const e=g.$implicit;t.R7$(2),t.JRh(e.type),t.R7$(2),t.JRh(e.notes)}}const P=[{path:"",component:(()=>{class s{constructor(e,i,r,n,l,h){this.toastrService=e,this.translate=i,this.router=r,this.route=n,this._detector=l,this.dialogService=h,this.tableData=[{type:"\u0639\u0642\u062f \u0627\u0644\u0645\u0634\u0631\u0648\u0639",notes:"\u064a\u0631\u0641\u0642 \u0627\u0644\u0639\u0642\u062f \u0645\u0639 \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"},{type:"\u062c\u062f\u0648\u0644 \u0627\u0644\u0643\u0645\u064a\u0627\u062a",notes:""},{type:"\u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0627\u0646\u062c\u0627\u0632",notes:"\u064a\u0631\u0641\u0642 \u0628\u0639\u062f \u0627\u0646\u062a\u0647\u0627\u0621 \u0643\u0644 \u0645\u0631\u062d\u0644\u0629"},{type:"\u062e\u0637\u0627\u0628 \u0627\u0644\u062a\u0631\u0633\u064a\u0629 ",notes:"\u064a\u0631\u0641\u0642 \u062e\u0637\u0627\u0628 \u0627\u0644\u062a\u0631\u0633\u064a\u0629 \u0639\u0646\u062f \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0639\u0631\u0636 \u0627\u0644\u0641\u0646\u0649 \u0644\u0644\u0645\u0634\u0631\u0648\u0639"},{type:"\u0645\u0631\u0641\u0642\u0627\u062a \u0627\u062e\u0631\u0649",notes:""}],this.dir="rtl",this.totalRecords=0,this.pageSizeOptions=R.c.DEFAULT_PAGE_SIZE_OPTIONS,this.displayedColumns=["strategicGoalName","GoalCode","GoalDesc","actions1","actions2"],this.tableData1=[],"ar"==i.currentLang&&(this.dir="rtl")}ngOnInit(){this.tableData1=[{type:"\u0639\u0642\u062f \u0627\u0644\u0645\u0634\u0631\u0648\u0639",notes:"\u064a\u0631\u0641\u0642 \u0627\u0644\u0639\u0642\u062f \u0645\u0639 \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"},{type:"\u062c\u062f\u0648\u0644 \u0627\u0644\u0643\u0645\u064a\u0627\u062a",notes:""},{type:"\u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0627\u0646\u062c\u0627\u0632",notes:"\u064a\u0631\u0641\u0642 \u0628\u0639\u062f \u0627\u0646\u062a\u0647\u0627\u0621 \u0643\u0644 \u0645\u0631\u062d\u0644\u0629"},{type:"\u062e\u0637\u0627\u0628 \u0627\u0644\u062a\u0631\u0633\u064a\u0629 ",notes:"\u064a\u0631\u0641\u0642 \u062e\u0637\u0627\u0628 \u0627\u0644\u062a\u0631\u0633\u064a\u0629 \u0639\u0646\u062f \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0639\u0631\u0636 \u0627\u0644\u0641\u0646\u0649 \u0644\u0644\u0645\u0634\u0631\u0648\u0639"},{type:"\u0645\u0631\u0641\u0642\u0627\u062a \u0627\u062e\u0631\u0649",notes:""}]}ngAfterViewInit(){}sortData(e){const i=this.dataSource.data.slice();e.active&&""!==e.direction?(this.dataSource.data=i.sort((r,n)=>{if(!r.sortable||!n.sortable)return 1;{let l="asc"===e.direction;switch(e.active){case"strategicGoalName":return this.compare(r.strategicGoalName.toLowerCase(),n.strategicGoalName.toLowerCase(),l);case"GoalCode":return this.compare(r.goalCode.toString(),n.goalCode.toString(),l);default:return 0}}}),this.dataSource=new I.I6(this.dataSource.data)):this.dataSource.data=i}compare(e,i,r){return e<i?-1*(r?1:-1):e>i?1*(r?1:-1):0*(r?1:-1)}applyFilter(e){const i={strategicGoal:this.strategicGoalFilter.nativeElement.value.trim(),sortable:!0};this.dataSource.filterPredicate=(r,n)=>{const l=JSON.parse(n);return""==r.strategicGoalName||r.strategicGoalName.toLowerCase().includes(l.strategicGoalName.toLowerCase())},this.dataSource.filter=JSON.stringify(i),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ShowGrants(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/StrategicGoals/list/")}ShowAddGrant(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes/add")}ShowAdd(){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes/add")}edit(e){console.log("Edit:",e)}delete1(e){console.log("Delete:",e)}ShowEdit(e){this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/DocumentsTypes/edit/"+e)}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(y.t),t.rXU(d.c$),t.rXU(m.Ix),t.rXU(m.nX),t.rXU(t.gRc),t.rXU(o.S0W))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-list-district"]],viewQuery:function(i,r){if(1&i&&(t.GBs(C.B4,5),t.GBs(D.iy,5),t.GBs(O,5)),2&i){let n;t.mGM(n=t.lsd())&&(r.sort=n.first),t.mGM(n=t.lsd())&&(r.paginator=n.first),t.mGM(n=t.lsd())&&(r.strategicGoalFilter=n.first)}},decls:21,vars:5,consts:[[1,"content-container"],["type","button",1,"special-button","mb-3",3,"click"],[1,"table-container"],["border","1","cellpadding","8","cellspacing","0"],[4,"ngFor","ngForOf"],[1,"actions"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2),t.k0s(),t.nrm(3,"hr"),t.j41(4,"button",1),t.bIt("click",function(){return r.ShowAdd()}),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"nb-card",2)(8,"table",3)(9,"thead")(10,"tr")(11,"th"),t.EFF(12,"\u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a"),t.k0s(),t.j41(13,"th"),t.EFF(14,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"),t.k0s(),t.j41(15,"th"),t.EFF(16,"\u0627\u0644\u062a\u0639\u062f\u064a\u0644"),t.k0s(),t.j41(17,"th"),t.EFF(18,"\u0627\u0644\u062d\u0630\u0641"),t.k0s()()(),t.j41(19,"tbody"),t.DNE(20,$,13,2,"tr",4),t.k0s()()()()),2&i&&(t.R7$(2),t.SpI(" ","\u0627\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a"," "),t.R7$(3),t.SpI(" ",t.bMT(6,3,"Add")," "),t.R7$(15),t.Y8G("ngForOf",r.tableData1))},dependencies:[o.SrT,p.Sq,v.An,d.D9],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:2px solid #826026;text-align:center}thead[_ngcontent-%COMP%]{background-color:#826026;color:#fff;border:2px solid #826026}.actions[_ngcontent-%COMP%]{text-align:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}"]})}}return s})()},{path:"add",component:G},{path:"edit/:id",component:k}];let L=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[m.iI.forChild(P),m.iI]})}}return s})(),w=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[L,o.lVF,o.P5N,o.pty,p.MD,a.YN,a.X1,o.dQU,o.lVF,o.P5N,o._A2,o.NeG,o.clu,o.VcP,v.m_,I.tP,C.NQ,D.Ou,U.G,d.h.forChild({loader:{provide:d.Wr,useFactory:M._,deps:[f.Qq]}})]})}}return s})()}}]);